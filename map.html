<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ì¹œêµ¬ ìœ„ì¹˜ ê³µìœ </title>
    
    <!-- 1. ê¾¸ë¯¸ê¸° ë„êµ¬ (Tailwind CSS) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. ë„¤ì´ë²„ ì§€ë„ API (Geocoding í¬í•¨) -->
    <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=9nl297jo77&submodules=geocoder"></script>

    <!-- 3. ì•„ì´ì½˜ (Lucide) -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", "Malgun Gothic", sans-serif; -webkit-font-smoothing: antialiased; }
        .glass { background: rgba(255, 255, 255, 0.75); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.6); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05); }
        .hide { display: none !important; }
        
        .marker-wrapper { position: relative; display: flex; flex-direction: column; align-items: center; justify-content: center; width: 44px; height: 60px; pointer-events: none; }
        .emoji-marker { pointer-events: auto; background-color: white; border-radius: 50%; width: 44px; height: 44px; display: flex; justify-content: center; align-items: center; box-shadow: 0 4px 12px rgba(0,0,0,0.3); font-size: 26px; border: 2.5px solid white; transition: transform 0.2s; z-index: 10; }
        .emoji-marker:active { transform: scale(0.9); }
        .marker-name { pointer-events: auto; text-align: center; font-size: 11px; font-weight: bold; background: rgba(255,255,255,0.95); padding: 4px 8px; border-radius: 12px; margin-top: 4px; white-space: nowrap; box-shadow: 0 2px 4px rgba(0,0,0,0.1); color: #333; border: 1px solid rgba(0,0,0,0.05); z-index: 20; }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        .online-dot { width: 10px; height: 10px; background-color: #22c55e; border-radius: 50%; display: inline-block; border: 2px solid white; box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); animation: pulse-green 2s infinite; }
        .offline-dot { width: 10px; height: 10px; background-color: #9ca3af; border-radius: 50%; display: inline-block; border: 2px solid white; }
        
        @keyframes pulse-green {
            0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 4px rgba(34, 197, 94, 0); }
            100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-[#E8F0FE] via-[#F3E8FF] to-[#E8F8F5] min-h-screen pb-24 overflow-x-hidden select-none">

    <div id="login-modal" class="fixed inset-0 z-[999] bg-gray-900/60 backdrop-blur-sm flex items-center justify-center p-6 transition-opacity duration-300">
        <div class="bg-white/95 w-full max-w-sm rounded-[32px] p-8 shadow-2xl border border-white transform transition-all scale-100">
            <div class="flex flex-col items-center mb-6">
                <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4 shadow-inner">
                    <i data-lucide="lock" class="text-blue-500 w-8 h-8"></i>
                </div>
                <h2 class="text-2xl font-bold text-gray-800">ë‹¹ì‹ ì€ ëˆ„êµ¬ì‹­ë‹ˆê¹Œ?</h2>
                <p class="text-gray-500 text-sm mt-2 text-center">ìš°ë¦¬ 6ëª…ë§Œ ë“¤ì–´ì˜¬ ìˆ˜ ìˆì–´ìš”.<br>ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
            </div>
            <div class="space-y-4">
                <input type="text" id="login-input" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" class="w-full bg-gray-100 border-none rounded-2xl px-5 py-4 text-center text-lg font-bold focus:ring-2 focus:ring-blue-500 outline-none placeholder-gray-400">
                <p id="login-error" class="text-red-500 text-xs text-center font-bold h-4"></p>
                <button onclick="tryLogin()" class="w-full bg-gray-900 text-white font-bold py-4 rounded-2xl shadow-lg active:scale-95 transition-all flex items-center justify-center gap-2">
                    ì…ì¥í•˜ê¸° <i data-lucide="log-in" class="w-4 h-4"></i>
                </button>
            </div>
        </div>
    </div>

    <div id="app-content" class="hide animate-fade-in">
        <div class="px-6 pt-12 pb-6 flex justify-between items-start">
            <div>
                <h1 id="page-title" class="text-2xl font-bold text-gray-800 leading-snug">ìš°ë¦¬ ì¹œêµ¬ë“¤,<br>ì§€ê¸ˆ ì–´ë”” ìˆë‚˜ìš”? ğŸŒ™</h1>
            </div>
            <div class="flex gap-2 mt-1">
                <div class="opacity-50 animate-pulse text-2xl">âœ¨</div>
            </div>
        </div>

        <div class="px-5 space-y-4">
            <div id="view-map" class="space-y-4">
                <div class="h-[65vh] w-full rounded-[32px] overflow-hidden shadow-lg border border-white/60 relative z-0 bg-gray-100">
                    <div id="map" class="w-full h-full z-0 outline-none"></div>
                </div>
                <div class="glass rounded-[32px] p-4 flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <div id="map-count" class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold">0</div>
                        <div class="flex flex-col">
                            <span class="font-bold text-sm text-gray-800">ì ‘ì† ì¤‘ì¸ ì¹œêµ¬</span>
                            <span class="text-[10px] text-gray-500">ë„¤ì´ë²„ ì§€ë„ë¡œ í™•ì¸í•´ë³´ì„¸ìš”!</span>
                        </div>
                    </div>
                    <button onclick="updateLocation()" class="bg-gray-900 text-white px-4 py-2 rounded-full text-xs font-bold shadow-md active:scale-95 transition-transform flex items-center gap-1">
                        <i data-lucide="refresh-cw" class="w-3 h-3"></i>
                        <span id="refresh-text">ê°±ì‹ </span>
                    </button>
                </div>
            </div>

            <div id="view-friends" class="hide space-y-4">
                <div class="flex justify-between items-end px-1">
                    <h2 class="text-lg font-bold text-gray-800">ì¹œêµ¬ ëª©ë¡ (<span id="list-count">0</span>)</h2>
                    <span class="text-xs text-gray-400 mb-1">í„°ì¹˜í•˜ë©´ ìœ„ì¹˜ í™•ì¸</span>
                </div>
                <div id="friends-grid" class="space-y-3 pb-20"></div>
            </div>

            <div id="view-profile" class="hide space-y-4">
                <h2 class="text-lg font-bold text-gray-800">í”„ë¡œí•„ ì„¤ì •</h2>
                <div class="glass rounded-[32px] p-6 space-y-5">
                    <div>
                        <label class="text-xs font-bold text-gray-500 ml-1">ë‚´ ì´ë¦„</label>
                        <div id="profile-name" class="w-full mt-1 bg-gray-100 rounded-xl px-4 py-3 text-sm text-gray-800 font-bold"></div>
                    </div>
                    
                    <div>
                        <div class="flex justify-between items-center ml-1 mb-1">
                            <label class="text-xs font-bold text-gray-500">í˜„ì¬ ìœ„ì¹˜ (ìë™ ê°ì§€)</label>
                        </div>
                        <div id="current-address-display" class="w-full bg-gray-100 rounded-xl px-4 py-3 text-sm text-gray-600">ìœ„ì¹˜ ì •ë³´ ì—†ìŒ</div>
                    </div>

                    <div>
                        <label class="text-xs font-bold text-gray-500 ml-1">ì´ëª¨ì§€ ì„ íƒ</label>
                        <div class="flex gap-2 mt-2 overflow-x-auto pb-2 no-scrollbar" id="emoji-list"></div>
                    </div>
                    <button onclick="updateLocation()" class="w-full bg-blue-500 text-white font-bold py-3 rounded-xl shadow-lg active:scale-95 transition-all mt-4 flex items-center justify-center gap-2">
                        <i data-lucide="save" class="w-4 h-4"></i> ì €ì¥í•˜ê³  ìœ„ì¹˜ ì—…ë°ì´íŠ¸
                    </button>
                    <div class="pt-4 border-t border-gray-100">
                        <button onclick="logout()" class="w-full bg-gray-200 text-gray-600 font-bold py-3 rounded-xl active:scale-95 transition-all text-sm">ë¡œê·¸ì•„ì›ƒ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="bottom-nav" class="hide fixed bottom-6 left-1/2 transform -translate-x-1/2 w-[95%] max-w-lg z-[500]">
        <div class="glass rounded-[28px] p-1 flex justify-between items-center h-[72px] border border-white/50 px-1">
            <button onclick="switchTab('map')" class="nav-btn flex-1 flex flex-col items-center justify-center text-gray-900"><i data-lucide="map-pin" class="w-5 h-5 mb-1"></i><span class="text-[9px] font-bold">ì§€ë„</span></button>
            <button onclick="switchTab('friends')" class="nav-btn flex-1 flex flex-col items-center justify-center text-gray-400"><i data-lucide="users" class="w-5 h-5 mb-1"></i><span class="text-[9px] font-bold">ì¹œêµ¬</span></button>
            <div class="-mt-8 mx-1 cursor-pointer active:scale-90 transition-transform" onclick="updateLocation()">
                <div class="w-14 h-14 bg-gray-900 rounded-full shadow-xl flex items-center justify-center text-white ring-4 ring-white/50">
                    <i data-lucide="navigation" id="nav-icon" class="w-6 h-6"></i>
                </div>
            </div>
            <button onclick="switchTab('profile')" class="nav-btn flex-1 flex flex-col items-center justify-center text-gray-400"><i data-lucide="user-cog" class="w-5 h-5 mb-1"></i><span class="text-[9px] font-bold">í”„ë¡œí•„</span></button>
            <button onclick="exitApp()" class="nav-btn flex-1 flex flex-col items-center justify-center text-red-400"><i data-lucide="log-out" class="w-5 h-5 mb-1"></i><span class="text-[9px] font-bold">ë‚˜ê°€ê¸°</span></button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getDatabase, ref, set, onValue, get, child } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        // [í™•ì¸ ì™„ë£Œ] databaseURL ì ìš©ë¨
        const firebaseConfig = {
            apiKey: "AIzaSyDse4kjmrO-N8jqHV5sKHQ3T_UrS0eFpYo",
            authDomain: "friend-map-app.firebaseapp.com",
            databaseURL: "https://friend-map-app-default-rtdb.firebaseio.com", 
            projectId: "friend-map-app",
            storageBucket: "friend-map-app.firebasestorage.app",
            messagingSenderId: "366133879234",
            appId: "1:366133879234:web:70d61c54e8767b1a6ef65b"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const database = getDatabase(app);

        let currentUser = null;
        let myName = "";
        let myEmoji = "ğŸ¦Š";
        let friendsData = [];
        let map = null;
        let markers = [];

        const ALL_MEMBERS = ['ì „ì‹œê¸°', 'ì˜¤ìŠ¤í‹´', 'ì´ì§„ëˆ„', 'ì„±ì›ì œ', 'ë¥˜ì§±', 'í™ë°•ì‚¬'];

        window.onload = () => {
            lucide.createIcons();
            checkLogin();
            setupEmojiList();
        };

        window.checkLogin = () => {
            const savedName = localStorage.getItem('friendMapUserName');
            if (savedName) {
                myName = savedName;
                signIn();
            } else {
                document.getElementById('login-modal').classList.remove('hidden');
            }
        };

        window.tryLogin = () => {
            const input = document.getElementById('login-input').value.trim();
            const errorMsg = document.getElementById('login-error');
            
            if (ALL_MEMBERS.includes(input)) {
                localStorage.setItem('friendMapUserName', input);
                myName = input;
                signIn();
            } else {
                errorMsg.innerText = "ë“±ë¡ëœ ë©¤ë²„ê°€ ì•„ë‹™ë‹ˆë‹¤.";
            }
        };

        function signIn() {
            signInAnonymously(auth).then(() => {
                document.getElementById('login-modal').classList.add('hide');
                document.getElementById('app-content').classList.remove('hide');
                document.getElementById('bottom-nav').classList.remove('hide');
                document.getElementById('profile-name').innerText = myName;
                startListening();
                switchTab('map');
            }).catch((error) => {
                alert("ë¡œê·¸ì¸ ì˜¤ë¥˜: " + error.message);
            });
        }

        window.logout = () => {
            localStorage.removeItem('friendMapUserName');
            location.reload();
        };

        window.exitApp = () => {
            window.location.href = 'index.html';
        };

        function startListening() {
            onAuthStateChanged(auth, (user) => {
                if (user) {
                    currentUser = user;
                    
                    // [ì´ëª¨ì§€ ë³µêµ¬ ë¡œì§] ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë‚´ ì •ë³´ë¥¼ ë¨¼ì € ê°€ì ¸ì˜´
                    const dbRef = ref(database);
                    get(child(dbRef, `friend_locations/${myName}`)).then((snapshot) => {
                        if (snapshot.exists()) {
                            const data = snapshot.val();
                            if(data.emoji) myEmoji = data.emoji; // ì´ëª¨ì§€ê°€ ìˆë‹¤ë©´ ë³µêµ¬
                        }
                        // ë³µêµ¬ í›„ ìœ„ì¹˜ ì—…ë°ì´íŠ¸
                        updateLocation(true);
                    }).catch((error) => {
                        console.error(error);
                        updateLocation(true);
                    });

                    setInterval(() => { updateLocation(true); }, 180000); 

                    const friendsRef = ref(database, 'friend_locations');
                    onValue(friendsRef, (snapshot) => {
                        const data = snapshot.val();
                        if (data) {
                            // RTDB ê°ì²´ë¥¼ ë°°ì—´ë¡œ ë³€í™˜
                            friendsData = Object.values(data);
                        } else {
                            friendsData = [];
                        }

                        // ë‚´ ì •ë³´ ì—…ë°ì´íŠ¸ (í™”ë©´ í‘œì‹œìš©)
                        const myInfo = friendsData.find(f => f.displayName === myName);
                        if (myInfo) {
                            if (myInfo.emoji) myEmoji = myInfo.emoji;
                            if (myInfo.address) document.getElementById('current-address-display').innerText = myInfo.address;
                        }
                        
                        renderFriends();
                        updateMapMarkers();
                    });
                }
            });
        }

        window.updateLocation = (silent = false) => {
            if (!currentUser) return;
            
            const navIcon = document.getElementById('nav-icon');
            const refreshText = document.getElementById('refresh-text');

            if (!silent) {
                navIcon.classList.add('animate-spin');
                if(refreshText) refreshText.innerText = "ê°±ì‹  ì¤‘...";
            }

            if (!navigator.geolocation) {
                if (!silent) alert("ìœ„ì¹˜ ì •ë³´ë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤.");
                return;
            }

            navigator.geolocation.getCurrentPosition(async (pos) => {
                const { latitude, longitude } = pos.coords;
                let address = "ìœ„ì¹˜ í™•ì¸ ë¶ˆê°€";

                try {
                    if (naver && naver.maps && naver.maps.Service) {
                        await new Promise((resolve) => {
                            naver.maps.Service.reverseGeocode({
                                coords: new naver.maps.LatLng(latitude, longitude),
                                orders: [naver.maps.Service.OrderType.ADDR, naver.maps.Service.OrderType.ROAD_ADDR].join(',')
                            }, function(status, response) {
                                if (status === naver.maps.Service.Status.OK) {
                                    try {
                                        const item = response.v2.results[0];
                                        const region1 = item.region.area1.name; 
                                        const region2 = item.region.area2.name; 
                                        address = `${region1} ${region2}`;
                                    } catch(e) { console.log(e); }
                                }
                                resolve();
                            });
                        });
                    }
                } catch(e) { console.log("Geocoding Error", e); }

                try {
                    // [ì¤‘ìš”] 'myName'ì„ í‚¤ê°’ìœ¼ë¡œ ì €ì¥ -> ê°™ì€ ì´ë¦„ì´ë©´ ë®ì–´ì“°ê¸° (ì¤‘ë³µ ë°©ì§€)
                    await set(ref(database, 'friend_locations/' + myName), {
                        uid: currentUser.uid,
                        displayName: myName, // ê³ ìœ  IDë¡œ ì´ë¦„ ì‚¬ìš©
                        emoji: myEmoji,
                        address: address, 
                        latitude,
                        longitude,
                        timestamp: Date.now()
                    });
                    
                    if (!silent) {
                        navIcon.classList.remove('animate-spin');
                        if(refreshText) refreshText.innerText = "ê°±ì‹  ì™„ë£Œ!";
                        setTimeout(() => { if(refreshText) refreshText.innerText = "ë‚´ ìœ„ì¹˜ ê°±ì‹ "; }, 2000);
                        alert(`ë‚´ ìœ„ì¹˜ê°€ ì—…ë°ì´íŠ¸ ë˜ì—ˆìŠµë‹ˆë‹¤!\n(${address})`);
                    }
                } catch (e) {
                    console.error(e);
                    if (!silent) alert("ì „ì†¡ ì‹¤íŒ¨");
                }
            }, (err) => {
                console.error(err);
                if (!silent) {
                    alert("ìœ„ì¹˜ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”.");
                    navIcon.classList.remove('animate-spin');
                }
            });
        };

        function renderFriends() {
            const grid = document.getElementById('friends-grid');
            const mapCount = document.getElementById('map-count');
            const now = Date.now();
            
            const onlineCount = friendsData.filter(f => f.timestamp && (now - f.timestamp) < 600000).length;
            
            mapCount.innerText = onlineCount;
            if(document.getElementById('list-count')) document.getElementById('list-count').innerText = friendsData.length;
            grid.innerHTML = "";

            ALL_MEMBERS.forEach(name => {
                const friend = friendsData.find(f => f.displayName === name) || {};
                const isMe = name === myName;
                
                const hasData = friend.latitude !== undefined;
                const emoji = friend.emoji || (isMe && myEmoji ? myEmoji : 'ğŸ‘¤');
                
                let isOnline = false;
                let infoStr = "ìœ„ì¹˜ ì •ë³´ ì—†ìŒ";
                
                if (hasData && friend.timestamp) {
                    const date = new Date(friend.timestamp);
                    const diff = now - friend.timestamp;
                    isOnline = diff < 10 * 60 * 1000;
                    
                    const timeStr = date.toLocaleTimeString('ko-KR', {hour:'2-digit', minute:'2-digit'});
                    const addr = friend.address || "ì£¼ì†Œ ë¯¸ìƒ";
                    infoStr = `${addr} Â· ${timeStr}`;
                }

                grid.innerHTML += `
                <div class="w-full bg-white border border-gray-100 rounded-[20px] p-4 flex items-center gap-4 shadow-sm active:scale-[0.98] transition-transform" ${hasData ? `onclick="showOnMap(${friend.latitude}, ${friend.longitude})"` : ''}>
                    <div class="relative w-12 h-12 flex-shrink-0 bg-gray-50 rounded-[18px] flex items-center justify-center text-2xl border border-gray-100">
                        ${emoji}
                        <div class="absolute -bottom-1 -right-1 flex items-center justify-center">
                            ${isOnline ? '<span class="online-dot"></span>' : '<span class="offline-dot"></span>'}
                        </div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="flex items-center gap-2">
                            <h4 class="font-bold text-gray-900 text-base truncate">${name}</h4>
                            ${isMe ? '<span class="bg-blue-100 text-blue-600 text-[10px] font-bold px-1.5 py-0.5 rounded-md">ë‚˜</span>' : ''}
                        </div>
                        <p class="text-xs text-gray-500 mt-0.5 truncate">${infoStr}</p>
                    </div>
                    <div class="flex flex-col items-end justify-center gap-1">
                        ${hasData ? `<div class="bg-gray-100 p-1.5 rounded-full text-gray-500"><i data-lucide="map-pin" class="w-3 h-3"></i></div>` : ''}
                    </div>
                </div>`;
            });
            lucide.createIcons();
        }

        window.switchTab = (tabName) => {
            ['map', 'friends', 'profile'].forEach(t => {
                const el = document.getElementById('view-' + t);
                if(t === tabName) {
                    el.classList.remove('hide');
                    el.classList.add('animate-in', 'fade-in', 'slide-in-from-bottom-4');
                } else {
                    el.classList.add('hide');
                }
            });
            const title = document.getElementById('page-title');
            if(tabName === 'map') {
                title.innerHTML = "ìš°ë¦¬ ì¹œêµ¬ë“¤,<br>ì§€ê¸ˆ ì–´ë”” ìˆë‚˜ìš”? ğŸŒ™";
                setTimeout(initMap, 100);
            }
            if(tabName === 'friends') title.innerHTML = "ì¹œêµ¬ ëª©ë¡<br>ì‹¤ì‹œê°„ í˜„í™© ğŸ‘€";
            if(tabName === 'profile') title.innerHTML = "ë‚´ ì„¤ì •<br>í”„ë¡œí•„ ê¾¸ë¯¸ê¸° âš™ï¸";
            
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.replace('text-gray-900', 'text-gray-400'));
        };

        function initMap() {
            if (map || typeof naver === 'undefined') return;
            const mapOptions = {
                center: new naver.maps.LatLng(36.5, 127.8),
                zoom: 7,
                scaleControl: false, logoControl: false, mapDataControl: false, zoomControl: false
            };
            map = new naver.maps.Map('map', mapOptions);
            updateMapMarkers();
        }

        function updateMapMarkers() {
            if (!map || typeof naver === 'undefined') return;
            markers.forEach(m => m.setMap(null));
            markers = [];
            friendsData.forEach(f => {
                if (f.latitude && f.longitude) {
                    const position = new naver.maps.LatLng(f.latitude, f.longitude);
                    const contentHtml = `
                        <div class="marker-wrapper">
                            <div class="emoji-marker">${f.emoji || 'ğŸ™‚'}</div>
                            <div class="marker-name">${f.displayName}</div>
                        </div>`;
                    const marker = new naver.maps.Marker({
                        position: position, map: map,
                        icon: { content: contentHtml, size: new naver.maps.Size(44, 60), anchor: new naver.maps.Point(22, 22) }
                    });
                    markers.push(marker);
                }
            });
        }

        window.showOnMap = (lat, lng) => {
            switchTab('map');
            setTimeout(() => {
                if(map && typeof naver !== 'undefined') {
                    const moveLatLon = new naver.maps.LatLng(lat, lng);
                    map.setCenter(moveLatLon); map.setZoom(16);
                }
            }, 300);
        };

        function setupEmojiList() {
            const emojis = ["ğŸ¦Š", "ğŸ°", "ğŸ¸", "ğŸ¯", "ğŸ¶", "ğŸ±", "ğŸ¼", "ğŸ¨", "ğŸ¦„", "ğŸµ"];
            const container = document.getElementById('emoji-list');
            container.innerHTML = emojis.map(e => `<button onclick="setEmoji('${e}')" class="text-2xl p-3 rounded-xl bg-gray-50 hover:bg-blue-100 transition-colors">${e}</button>`).join('');
        }
        window.setEmoji = (e) => {
            myEmoji = e;
            alert(`ì´ëª¨ì§€ê°€ ${e}ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤!`);
        };
    </script>
</body>
</html>